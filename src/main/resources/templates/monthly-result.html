<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>투자 계산 결과</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 30px;
        }

        h1 {
            color: #2E8B57;
        }

        .result-container {
            margin-top: 20px;
            padding: 20px;
            border: 1px solid #ccc;
            width: 50%;
        }

        .result-row {
            margin-bottom: 10px;
            font-size: 18px;
        }

        .label {
            font-weight: bold;
        }
    </style>
</head>
<body>
<h1>투자 계산 결과</h1>

<div class="result-container" id="resultContainer">
    <!-- 계산 결과가 여기에 들어갑니다 -->
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // sessionStorage에서 계산 결과 읽기
        const calculationResult = JSON.parse(sessionStorage.getItem('calculationResult'));

        const container = document.getElementById('resultContainer');

        if (!calculationResult) {
            container.innerHTML = '<div>계산 결과가 존재하지 않습니다.</div>';
            return;
        }

        const monthlyResults = calculationResult.monthlyInvestmentResults;

        // 월별 데이터 존재 확인
        if (!monthlyResults || monthlyResults.length === 0) {
            container.innerHTML = '<div>월별 계산 결과가 존재하지 않습니다.</div>';
            return;
        }

        // 숫자 포맷 함수 (3자리 콤마)
        const formatNumber = (num) => num.toLocaleString('ko-KR');

        // 테이블 HTML 생성
        let resultHTML = `
            <table border="1" cellpadding="8" cellspacing="0" style="border-collapse: collapse; width: 100%;">
                <thead>
                    <tr style="background-color: #f2f2f2;">
                        <th>월</th>
                        <th>원금</th>
                        <th>이자</th>
                        <th>세금</th>
                        <th>총 수익</th>
                    </tr>
                </thead>
                <tbody>
        `;

        monthlyResults.forEach(item => {
            resultHTML += `
                <tr>
                    <td>${item.month}</td>
                    <td>${formatNumber(item.principal)} 원</td>
                    <td>${formatNumber(item.interest)} 원</td>
                    <td>${formatNumber(item.tax)} 원</td>
                    <td>${formatNumber(item.totalProfit)} 원</td>
                </tr>
            `;
        });

        resultHTML += `
                </tbody>
            </table>
        `;

        // 출력
        container.innerHTML = resultHTML;
    });
</script>
</body>
</html>
